{% extends 'base.html' %} {% load static %} {% block head %}
<!-- <link rel="stylesheet" href="{% static 'style.css' %}" type="text/css"> -->
<title>Home</title>
{% endblock %} {% block content %}
<div class="container-fluid">
  <div class="collapse p-3 mb-5 rounded" id="collapseExample">
    <div class="row">
      <div class="card my-5 col-lg-6 col-md-8  col-sm-10 ml-auto mr-auto text-white bg-dark">
          <div class="card-header mx-auto">Add New To Do</div>
        <div class="card-body">

          <form action="{% url 'todo_app:add' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <!-- {{ form.as_p }} -->
            <div class="form-group">
              <label for="subject">Subject</label>
              <input
                type="text"
                id="subject"
                name="subject"
                class="form-control"
                placeholder="Subject"
              />
            </div>
            <div class="form-group">
              <label for="priority">Priority</label>
              <input
                type="text"
                id="priority"
                name="priority"
                class="form-control"
                placeholder="Priority"
              />
            </div>
            <div class="form-group">
                <label for="date">Date</label>
                <input
                  type="date"
                  id="date"
                  name="date"
                  class="form-control"
                  placeholder="Priority"
                />
              </div>
            <div class="justify-content-end">
              <div class="row mx-auto">
                <div class="mr-auto">
                    <a class="btn btn-danger ml-auto" type='button' data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Cancel</a>

                </div>
                <div class="ml-auto">
                  <button type="submit" class="btn btn-success">
                    Add New To Do
                  </button>
                </div>
              </div>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>

  <h3 class="mt-5">All To Do's</h3>
  <div class="container-fluid">
    <div class="row px-3 py-3 justify-content-center">

        {%  if not tasks %}

        <div class="alert alert-danger text-lg-center" role="alert">
            <p class='display-4'>There is nothing in To Do's! <br>Add Something!</p>
            <a class="btn btn-success" type="submit" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                Add New
            </a>
          </div>

          {% else %}

        {% for task in tasks reversed %}
        
      <div
        class="card col col-lg-3 col-md-4 col-sm-6 mx-2 my-2 bg-dark text-white"
        style="max-width: 340px; min-width: 340px"
      >
      <a href="{% url 'todo_app:details' task.id %}" style="text-decoration: none;" class="text-white">
        <h4 class="card-header">{{ task.subject }}</h4>
        <div class="card-body">
        <h6 class='card-title disabled'>{{ task.date }}</h6>
          <p class="card-text">{{ task.priority }}</p></a>
          
        </div>
        <div class="card-footer mt-5">
            <div class="row mx-auto">
                
                <div class="mr-auto" style="position: relative; bottom: 20px;">
                  <button class="btn btn-outline-danger" data-toggle="collapse" href="#confirmDelete{{task.id}}" role="button" aria-expanded="false" aria-controls="collapseExample">
                      Delete
                    </button>
                </div>

                
                    <div class="mx-auto" style="position: relative; bottom: 20px;">
                      <a href="{% url 'todo_app:update' task.id %}"><button class="btn btn-info">Edit</button></a>
                    </div>
                    
                
            
                <form method="POST" action="{% url 'todo_app:update' task.id %}">
                    {% csrf_token %}
                <div class="ml-auto" style="position: relative; bottom: 20px;">
                  <button class="btn btn-warning">In process</button>
                </div>
            </form>

                
              </div>

              <div class="collapse" id="confirmDelete{{task.id}}">
                <form method="POST" action="{% url 'todo_app:delete' task.id %}">
                {% csrf_token %}
                <div class="alert alert-warning" role="alert">
                    Confirm Delete! 
                    <button class="btn btn-outline-danger" style='position: relative; left: 45px;'>
                        Delete
                      </button>
                  </div>
                </form>
              </div>

        </div>
      </div>
    

{% endfor %}

{% endif %}

    </div>
  </div>
</div>
{% endblock %}
